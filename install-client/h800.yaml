client:
  workdir: /tmp/store-deploy
  agent: store-agent.sh
  machine: h800

# the order is important: for install, all files are installed in
# the sequencial order as configured; for uninstall, all files
# are uninstalled in reverse order.
services:
  - name: lfs
    pkgs:
      - lfs/ddn/lustre-client-modules-5.15.0-94-generic_2.14.0-ddn85-1_amd64.deb
      - lfs/ddn/lustre-client-utils_2.14.0-ddn85-1_amd64.deb
    etcs:
      - lfs/gpu-lustre.conf
      - lfs/mnt-prod_cn_huabei1_shared_nvme.mount
      - lfs/mnt-prod_cn_huabei1_shared_hdd.mount
      - lfs/public.mount
      - lfs/lfsmount.target

  - name: lvm
    pkgs:
      - nvme-cli
      - sanlock
      - lvm2-lockd
    etcs:
      - nvme/nvme-rdma.ko
      - nvme/discovery.conf
      - lvm/sanlock
      - lvm/lvmlocal.conf
      - lvm/lvm.conf
    startcmds:
      - "vgchange --lockstart vgk8s01"
    stopcmds:
      - "vgchange --lockstop vgk8s01"
